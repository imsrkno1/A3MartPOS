{% extends "base.html" %}
{% block title %}Dashboard - {{ super() }}{% endblock %}

{% block content %}
<div class="pb-6">
    <h1 class="text-3xl font-bold text-gray-900">Dashboard</h1>
    <p class="mt-1 text-sm text-gray-600">Overview of your store's activity.</p>
</div>

<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">

    <div class="bg-gradient-to-br from-green-500 to-emerald-600 text-white p-6 rounded-xl shadow-lg overflow-hidden relative">
        <div class="absolute top-0 right-0 -mt-4 -mr-4 text-emerald-300 opacity-30 text-6xl">
            {# Placeholder for Icon (e.g., Currency) #}
            <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 8l3 5m0 0l3-5m-3 5v4m-3-5h6m-6 3h6m6-3a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
        </div>
        <h2 class="text-sm font-medium text-green-100 uppercase tracking-wider mb-1">Today's Sales</h2>
        <p class="text-4xl font-extrabold">â‚¹{{ "%.2f"|format(data.todays_sales) }}</p>
        {# <p class="text-sm text-green-100 mt-2">+5% vs yesterday</p> #}
    </div>

     <div class="bg-gradient-to-br from-blue-500 to-indigo-600 text-white p-6 rounded-xl shadow-lg overflow-hidden relative">
         <div class="absolute top-0 right-0 -mt-4 -mr-4 text-indigo-300 opacity-30 text-6xl">
             {# Placeholder for Icon (e.g., Cart) #}
             <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" /></svg>
         </div>
        <h2 class="text-sm font-medium text-blue-100 uppercase tracking-wider mb-1">Today's Orders</h2>
        <p class="text-4xl font-extrabold">0</p> {# Replace with actual data later #}
        {# <p class="text-sm text-blue-100 mt-2">View Details</p> #}
    </div>

     <div class="bg-gradient-to-br from-yellow-400 to-orange-500 text-white p-6 rounded-xl shadow-lg overflow-hidden relative">
         <div class="absolute top-0 right-0 -mt-4 -mr-4 text-orange-300 opacity-30 text-6xl">
             {# Placeholder for Icon (e.g., User Add) #}
             <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z" /></svg>
         </div>
        <h2 class="text-sm font-medium text-yellow-100 uppercase tracking-wider mb-1">New Customers</h2>
        <p class="text-4xl font-extrabold">0</p> {# Replace with actual data later #}
        {# <p class="text-sm text-yellow-100 mt-2">View Customers</p> #}
    </div>

     <div class="bg-gradient-to-br from-red-500 to-pink-600 text-white p-6 rounded-xl shadow-lg overflow-hidden relative">
          <div class="absolute top-0 right-0 -mt-4 -mr-4 text-pink-300 opacity-30 text-6xl">
              {# Placeholder for Icon (e.g., Warning/Alert) #}
              <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" /></svg>
          </div>
         <h2 class="text-sm font-medium text-red-100 uppercase tracking-wider mb-1">Low Stock Items</h2>
         <p class="text-4xl font-extrabold">{{ data.low_stock_items|length }}</p>
         {# ** ADDED: Generate Order Button (only if low stock items exist) ** #}
         {% if data.low_stock_items %}
            <form action="{{ url_for('inventory.generate_low_stock_order') }}" method="POST" class="inline">
                 <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                 <button type="submit" class="text-sm text-red-100 mt-1 hover:underline font-semibold">Generate Purchase Order</button>
            </form>
         {% else %}
             <a href="{{ url_for('inventory.list_products', low_stock='true') }}" class="text-sm text-red-100 mt-2 hover:underline">View Items</a>
         {% endif %}
     </div>

    <div class="bg-white p-6 rounded-xl shadow-lg sm:col-span-2 lg:col-span-2">
        <h2 class="text-xl font-semibold text-gray-800 mb-4">Top Selling Items (Today)</h2>
        {% if data.top_items %}
            <ul class="space-y-3">
                {% for item_name, quantity in data.top_items %}
                    <li class="flex justify-between items-center text-sm border-b border-gray-100 pb-2">
                        <span class="text-gray-700 truncate pr-2">{{ item_name }}</span>
                        <span class="font-medium text-gray-800 bg-gray-100 px-2.5 py-1 rounded-full text-xs">{{ quantity|int }} sold</span>
                    </li>
                {% endfor %}
            </ul>
        {% else %}
            <p class="text-gray-500 italic">No sales recorded yet today.</p>
        {% endif %}
    </div>

    <div class="bg-white p-6 rounded-xl shadow-lg sm:col-span-2 lg:col-span-2">
        <h2 class="text-xl font-semibold text-gray-800 mb-4">Quick Actions</h2>
        <div class="grid grid-cols-2 gap-4">
             <a href="{{ url_for('billing.billing_page') }}" class="flex items-center justify-center text-center px-4 py-3 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                 {# Icon Placeholder #} <span class="mr-2">ðŸ›’</span> Start New Bill
             </a>
             <a href="{{ url_for('inventory.add_product') }}" class="flex items-center justify-center text-center px-4 py-3 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
                 {# Icon Placeholder #} <span class="mr-2">âž•</span> Add Product
             </a>
             <a href="{{ url_for('inventory.add_purchase') }}" class="flex items-center justify-center text-center px-4 py-3 border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
                 {# Icon Placeholder #} <span class="mr-2">ðŸ“¦</span> Record Purchase
             </a>
             <a href="{{ url_for('customers.add_customer') }}" class="flex items-center justify-center text-center px-4 py-3 border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
                 {# Icon Placeholder #} <span class="mr-2">ðŸ‘¤</span> Add Customer
             </a>
        </div>
    </div>

</div>

{% endblock %}

{% block scripts %}
{% endblock %}